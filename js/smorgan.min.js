/*! smorgan */

"use strict";$(document).ready(function(){$.fn.extend({animateCss:function(e,t){var o=function(e){var t={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(var o in t)if(void 0!==e.style[o])return t[o]}(document.createElement("div"));return this.addClass("animated "+e).one(o,function(){$(this).removeClass("animated "+e),"function"==typeof t&&t()}),this}});var n={scroll:{current:0,direction:null,timeout:null,lock:!1,toggleLock:function(e){n.scroll.lock=e,console.log(n.scroll.lock)}},viewport:{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0),resetTimeout:null,reset:function(){n.viewport.width=Math.max(document.documentElement.clientWidth,window.innerWidth||0),n.viewport.height=Math.max(document.documentElement.clientHeight,window.innerHeight||0),n.singlePost.headerOpen?(n.singlePost.headerHeightConst=$("#single-post-header").height(),n.singlePost.setSplashSize()):(null!==n.viewport.resetTimeout&&clearTimeout(n.viewport.resetTimeout),n.viewport.resetTimeout=setTimeout(function(){n.singlePost.toggleHeader(!0,function(){n.singlePost.headerHeightConst=$("#single-post-header").height(),n.singlePost.setSplashSize()})},250))}},checkScroll:function(){if(window.pageYOffset>n.page.social.height()+100?n.lockSocial(!0):window.pageYOffset<=n.viewport.height&&n.lockSocial(!1),n.page.content.length)if(n.viewport.height,window.pageYOffset>n.scroll.current)"down"!==n.scroll.direction&&window.pageYOffset>n.viewport.height-n.page.header.height()&&(n.scroll.direction="down",n.page.header.animate({top:"-100px"},250,function(){}),n.page.search.animate({top:"0px"},250,function(){})),n.scroll.current=window.pageYOffset;else if(window.pageYOffset<n.scroll.current-50){var e=function(){"up"!==n.scroll.direction&&(n.scroll.direction="up",n.page.header.animate({top:"0px"},250,function(){}),n.page.search.animate({top:"100px"},250,function(){}),n.scroll.current=window.pageYOffset)};null!==n.scroll.timeout&&clearTimeout(n.scroll.timeout),600<window.pageYOffset?n.scroll.timeout=setTimeout(function(){e()},250):e()}if(n.singlePost.content.length){if(0!==window.pageYOffset||n.singlePost.headerOpen||n.singlePost.toggleHeader(!0),window.pageYOffset>n.scroll.current)"down"!==n.scroll.direction&&window.pageYOffset>n.viewport.height-n.page.header.height()-n.singlePost.headerHeightConst&&(n.scroll.direction="down",n.page.header.animate({top:"-100px"},250,function(){}),n.page.search.animate({top:"0px"},250,function(){}),n.singlePost.header.animate({top:"0px"},250,function(){})),n.scroll.current=window.pageYOffset;else if(window.pageYOffset<n.scroll.current-n.singlePost.headerHeightConst-500){var t=function(){"up"!==n.scroll.direction&&(n.scroll.direction="up",n.page.header.animate({top:"0px"},250,function(){}),n.page.search.animate({top:"100px"},250,function(){}),n.singlePost.header.animate({top:"100px"},250,function(){})),n.scroll.current=window.pageYOffset};null!==n.scroll.timeout&&clearTimeout(n.scroll.timeout),600<window.pageYOffset?n.scroll.timeout=setTimeout(function(){t()},125):t()}var o=n.viewport.height-n.page.header.height()-n.singlePost.header.height();window.pageYOffset>o&&n.singlePost.headerOpen&&n.singlePost.headerAutoHide&&(n.singlePost.headerAutoHide=!1,n.singlePost.toggleClick())}},toggleElement:function(e){var t=null;switch(e){case"search":t=n.page.search;break;case"categories":t=n.page.categories;break;case"header":t=n.page.header}t.slideToggle(250,function(){switch(e){case"search":n.page.searchOpen=!n.page.searchOpen;break;case"categories":n.page.catsOpen=!n.page.catsOpen}})},skipSplash:function(){var e=0;n.page.content.length&&(e=n.page.content.offset().top),n.singlePost.content.length&&(e=n.singlePost.splash.height(),n.singlePost.headerOpen&&(n.singlePost.headerAutoHide=!1,n.singlePost.toggleClick())),$("html, body").animate({scrollTop:e})},lockSocial:function(e){e?n.page.social.css({position:"fixed",top:n.viewport.height-n.page.social.height()-100}):n.page.social.css({position:"absolute",top:"100vh"})},page:{loading:$("#loading"),header:$("header"),headerHeight:$("header").height(),responsiveNav:$("#navResponsive"),splash:$("#splash"),splashSkip:$("#skip-splash"),toggleNav:$("#toggle-nav"),categories:$("#categories"),categoriesToggle:$("#toggle-cats"),categoriesOpen:!1,search:$("#search-bar"),searchOpen:!1,closeSearch:$("#close-search"),openSearch:$("#open-search"),social:$("#social"),content:$("#page-main"),footer:$("footer")},singlePost:{content:$("#single-post"),header:$("#single-post-header"),edit:$(".edit-button"),headerHeightConst:0,headerToggle:$("#single-post-header .toggle"),headerOpen:!0,headerAutoHide:!0,toggle:$("#toggle-header"),title:$("#single-post-title"),splash:$("#single-splash"),discussionLink:$("#single-discussion"),setSplashSize:function(){n.singlePost.splash.css({opacity:1,height:n.viewport.height-n.singlePost.header.height()-n.page.header.height(),top:n.singlePost.header.height(),"margin-bottom":n.singlePost.header.height()})},toggleHeader:function(e,t){e?n.singlePost.splash.animate({top:n.singlePost.headerHeightConst+"px","margin-bottom":n.singlePost.headerHeightConst+"px"},250,function(){n.singlePost.edit.css({display:"inline-block"})}):n.singlePost.splash.animate({top:"0px","margin-bottom":"0px"},250,function(){n.singlePost.edit.css({display:"none"})}),n.singlePost.headerToggle.slideToggle(250,function(){n.singlePost.headerOpen?n.singlePost.toggle.html("<i class='fa fa-chevron-down'></i>"):n.singlePost.toggle.html("<i class='fa fa-chevron-up'></i>"),n.singlePost.headerOpen=!n.singlePost.headerOpen,"function"==typeof t&&t()})},titleClick:function(){$("html, body").animate({scrollTop:0})},discussionClick:function(){var e=$("#comments").offset().top-n.singlePost.header.height()-n.page.header.height();$("html, body").animate({scrollTop:e})},toggleClick:function(){n.singlePost.headerOpen?n.singlePost.toggleHeader(!1,function(){}):n.singlePost.toggleHeader(!0,function(){})}},contact:{request:null,form:$("#contactForm"),error:$("#formError"),prompt:$("#ui-prompt"),visitor:{name:$("#visitorname"),email:$("#visitoremail"),comments:$("#visitorcomment")},submit:$("#contactSubmit"),loading:$("#email-loading"),validate:function(){return""!==n.contact.visitor.name.val()&&n.contact.visitor.name.val().length&&null!==n.contact.visitor.name.val()?/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(n.contact.visitor.email.val()).toLowerCase())?!(""===n.contact.visitor.comments.val()||!n.contact.visitor.comments.val().length||null===n.contact.visitor.comments.val())||(n.contact.error.text("Please add some comments.").show().fadeOut(2e3),!1):(n.contact.error.text("Please use a valid email address.").show().fadeOut(2e3),!1):(n.contact.error.text("Please fill out your name.").show().fadeOut(2e3),!1)}},resume:{quicklinks:$(".top-link"),quicknav:function(e){var t=$("#"+e).offset().top-n.page.header.height();$("html, body").animate({scrollTop:t})}}};$(window).resize(function(){$(window).width()!==n.viewport.width&&$(window).height()!==n.viewport.height&&n.viewport.reset()}),window.addEventListener("scroll",function(e){n.checkScroll()}),n.checkScroll(),n.page.splashSkip.click(function(){n.skipSplash()}),n.page.toggleNav.click(function(e){n.page.responsiveNav.slideToggle(250,function(){})}),n.page.openSearch.click(function(e){n.toggleElement("search")}),n.page.closeSearch.click(function(e){n.toggleElement("search")}),n.page.categoriesToggle.click(function(e){n.toggleElement("categories")}),$(document).delegate(".post-header","click",function(){window.location=$(this).find("a.hidden-link").attr("href")}),n.singlePost.title.click(function(e){n.singlePost.titleClick()}),n.singlePost.discussionLink.click(function(e){n.singlePost.discussionClick()}),n.singlePost.toggle.click(function(e){n.singlePost.toggleClick()}),$("#contactSubmit").click(function(e){var i=function(e){n.contact.error.text(e).show().fadeOut(4e3),grecaptcha.reset()};if(n.contact.validate()){n.contact.form.css({display:"none"}),n.contact.loading.css({display:"block"}),n.contact.request&&n.contact.request.abort();var t=n.contact.form.find("input, textarea").serialize();$.ajax({url:emailHandler+"/email/contact.php",type:"post",data:t,error:function(e,t,o){},success:function(e,t,o){switch(n.contact.prompt.text("Message delivered, thanks for reaching out!").show().fadeOut(4e3),n.contact.visitor.name.val(""),n.contact.visitor.email.val(""),n.contact.visitor.comments.val(""),grecaptcha.reset(),n.contact.form.css({display:"flex"}),n.contact.loading.css({display:"none"}),JSON.parse(e).success){case 1:grecaptcha.reset();break;case 2:i("Please fill out your name.");break;case 3:i("Please use a vaild email address.");break;case 4:i("Please add some comments.");break;case 5:i("Captcha failed.");break;case 6:i("I'm sorry, the server had troubled delivering your message.");break;case 7:i("Captcha failed.")}}})}}),n.resume.quicklinks.click(function(e){var t=$(this).data("tgt");n.resume.quicknav(t)}),n.page.content.length?(n.page.footer.css({display:"flex"}),$("#blog-link").attr("href","javascript:void(0);"),$("#blog-link").click(function(e){var t=n.page.content.offset().top-100;$("html, body").animate({scrollTop:t})}),$("#home-link").attr("href","javascript:void(0);"),$("#home-link").click(function(e){$("html, body").animate({scrollTop:0})})):n.singlePost.content.length?(n.singlePost.setSplashSize(),n.singlePost.splash.animateCss("fadeIn",function(){n.page.footer.css({display:"flex"})}),n.singlePost.headerHeightConst=$("#single-post-header").height()):n.page.footer.css({display:"flex"}),n.page.loading.animateCss("fadeOut",function(){n.page.loading.css({display:"none"})})});